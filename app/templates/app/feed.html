<!DOCTYPE html>
<html lang="en">
<!-- This is the feed template page. Right now it just iterates through the list of requests
     passed to it by the feed view in views.py. It simply prints the title of each requests in
     list format. -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <title>Feed</title>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <a class="navbar-brand" href='http://localhost:8000/'>QuickTutor</a>
    <div id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href = 'http://localhost:8000/feed/' >Feed</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href = 'http://localhost:8000/myRequest/' >Request</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href = 'http://localhost:8000/contacts/' >Messages</a>
        </li>
      </ul>
    </div>

    <div class="collapse navbar-collapse justify-content-end" id="navbarCollapse">
      <ul class="navbar-nav">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            {{user.email}}
          </a>
        <div class="dropdown-menu">
          <a class="dropdown-item" href='http://localhost:8000/profile/' >My Profile</a>
          <form action="/myRequest/" method="post" style="display: inline;">
                {% csrf_token %}
                <input type=submit name='action' value='Logout' class="dropdown-item">
            </form>
        </div>
      </ul>
      </div>

  </nav><br>

  <div class="jumbotron jumbotron-fluid">
    <div class="container">
      <h1 id="h1" class="display-4">Request Feed</h1>
      <p class="lead"> Browse current requests, and offer help to students in need!</p>
    </div>
</div>

  {% if requests_list %}
    <div class="container">
      {% for request in requests_list %}
        <div class="row">
          <div class="col-sm-6">
            <div class="card">
              <div class="card-header">
                <h5 class="card-title">{{ request.title }}</h5>
              </div>
              <div class="card-body">
                <p class="card-text mode-description">{{ request.description }} <br> {{request.user}}</p>
                <form action="/feed/" method="post" class="inline">
                  {% csrf_token %}
                  <input type="hidden" name="tutee" id="tutee" value="{{ request.user }}">
                  <input type="submit" name="action" value="Offer Help" class="btn btn-primary request-btn inline">
                </form>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
      <p>No requests are available.</p>
  {% endif %}

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

</body>
</html>